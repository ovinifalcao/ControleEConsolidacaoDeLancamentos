# ADR: 012 - Uso de um servidor de identidade e a escolha da sua tecnologia

  

Data: 2025-11-03

  

Responsável: André Vinícius Falcão

  

## :open_book: Contexto

Todas as aplicações do contexto apresentam criptografia em transito ao utilizar o protocolo HTTPs afim de garantir o `RNF05`, no entanto mesmo que esses dados trafeguem por redes públicas de forma criptografas ter os *endpoints* sem nenhum tipo de verificação e identidade e permissão não garantiriam conformidade com a `RNF04`.

  

## :bulb: Decisão
Diferente dos outros itens que seguiram as premissas apresentadas com foco o intercambialidade de produtos, neste a decisão é utilizar o mesmo produto independente do provedor de cloud, ou até mesmo do uso *on-premisse*.Provadores de identidade nativo das Clouds poderiam causar o *vendor lock-in* dificultando a migração do ambiente. Ao utilizar o Keycloak mantemos a premissa de utilizar software sem custo de licenciamento para desenvolvimento e produção, garantindo que a base de dados possa ser extraída e implantada novamente em outro ambiente sem nenhuma alteração no código (considere as configurações do ambiente um item a parte).


## :balance_scale: Justificativa

Como dito anteriormente o principal motivador da escolha é garantir a real interoperabilidade em qualquer provedor de nuvem sem tornar-se refém de características de um produto ou outro dificultando uma possível migração, situações como essa podem diminuir o capacidade de escolha e negociação do cliente. Para além disso é possível, de início, utilizar a mesma máquina virtual aonde estará hospedado o serviço de proxy para disponibilizar essa aplicação. A ferramenta escolhida não precisa se restringir aos limites da aplicação presente, podem ser o Servidor de autenticação de todo ambiente do cliente, possibilitando o uso das mesmas credencias em qualquer aplicação, mesmo que estejam em diferentes tecnologias.

  

## :bulb: Alternativas Consideradas
- **Servidores de Identidade Cloud**: Todos os provedores de nuvem selecionados implantam um PAAS para essa finalidade, mas foi descartado dados o pontos apresentados acima.
- **Microsoft Identity**: Este framework funciona melhor quando a aplicação é única em seu contexto e sistema, ou precisa manipular profundamente dados de usuários. Foi descartado por restringir o acesso ao ambiente .Net, mesmo que seja possível fazer uma configuração para isolar o servidor de identidade, naturalmente isso poderia abrir uma maior superfície de falhas do que utilizar um serviço "pronto" como o Keycloak.

  

## :hourglass_flowing_sand: **Consequências**

:white_check_mark: **Positivas**

- Flexibilidade de implantação

- Possibilidade de uso centralizado.

  

:no_entry: **Negativas**

- Não existe um serviço PAAS para implementa-lo diretamente.