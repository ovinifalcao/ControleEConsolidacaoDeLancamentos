
# ADR: 007 - Escolha do MongoDb como tecnologia de armazenamento do Relatório Consolidado

Data: 2025-10-29

Responsável: André Vinícius Falcão

## :open_book: Contexto
A aplicação de `Consolidação Financeira` precisa ser capaz de obter o valor consolidado do relatório, para isso é necessário que esse valor esteja disponível em uma base de dados, seguindo os detalhes do `RF04`.
  

## :bulb: Decisão
Será utilizado o Mongo Db como banco de dados para armazenar os dados do relatório. Cada documento da coleção vai referir-se a um dia, e será nesse documento que o `Consolidação Financeira Worker` irá fazer as devidas atualizações.

  

## :balance_scale: Justificativa
A escolha segue o padrão de decisão adotado na discussão da sessão de arquitetura:

-  **Especificações de utilização do projeto:** A aderência da tecnologia as necessidades do projeto mostrasse principalmente na recuperação do registro, de frente a tecnologias relacionais como Postgres e Ms SqlServer ele pode ser até seis vezes mais rápido para obter o dado. Além disso a natureza dos relatórios consolidados não é relacional, bases SQL naturalmente criam estruturas para garantir relacionamento e indexação elementos que não são cruciais nessa operação. Contudo, ainda haveriam outras tecnologias de bancos de dados a serem consideradas o que será discutido na sessão a seguir.

-  **Licenciamento open source**: Mesmo que não seja distribuído sobre licença Open Source é possível sua utilização sem custo de licenciamento inicial e para desenvolvimento. 

-  **Intercambialidade com serviços de nuvem**:  Todos os provedores de nuvens considerados oferecem ferramentas para utilização da tecnologia, garantindo facilidade para migração entre ambientes.


Consideração para o uso Inicial em nuvem:

| Provedor de Nuvem | Nome do Serviço | Custo Mínimo Mensal |
|--|--|--|
| Azure | Atlas | $60 (após 10gb) |
| AWS | Atlas  | $60 (após 10gb) |
| GCP | Atlas  | $60 (após 10gb) |

## :bulb: Alternativas Consideradas
- Bases SQL: Como apresentado acima estratégias relacionais forneceriam mais recursos do que o escopo necessita para realizar esse requisitos, e possivelmente seriam menos eficientes.

- Outros bancos de dados Orientados a Documentos: Existem outras tecnologias de bancos de dados NoSql que funcionam com documentos (ex. Raven, Dynamo, Cosmos), mas existe uma dificuldade comercial de encontrar profissionais para gestão especializadas dessas tecnologias e não atenderia a premissa de ser intercambiável entre os provedores de nuvem que somados são as vantagens apresentada do mongo sobre seus concorrentes nessa análise. 

## :hourglass_flowing_sand: **Consequências**
:white_check_mark: **Positivas**
- Obtenção de dados com maior velocidade.
- Utilização de recursos da tecnologia com maior eficiência.

:no_entry: **Negativas**

- O custo pode ser mais alto a longo prazo

## :link: Referencias
[Comparação de performance Postgres e Mongo](https://www.researchgate.net/publication/337314318_Performance_Analysis_of_PostgreSQL_and_MongoDB_Databases_for_Unstructured_Data)